{% extends "base-headered.html" %}

{% block content_headered %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css"
    integrity="sha512-q3eWabyZPc1XTCmF+8/LuE1ozpg5xxn7iO89yfSOd5/oKvyqLngoNGsx8jq92Y8eXJ/IRxQbEC+FGSYxtk2oiw=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

<h1 class="title">Your watchlist</h1>

<div class="row left-aligned" style="padding-bottom: 20px; padding-left: 20px;">
    <a href="/send_email">
        <button class="btn btn-light" style="border-radius: 1rem;">
            Send Recommendations
        </button>
    </a>
</div>

{{watchlist}}
{% for media in watchlist %}
    {{media.title}}
{% endfor %}

<h3>Share my watchlist to</h3>
<div class="socials-container">
    <table class="table table-sm table-borderless text-center">
        <tr>
            <td>
                <a class="social-icon icon-facebook unstyled-link" target="blank"><i class="fab fa-facebook"></i></a>
            </td>
            <td>
                <a class="social-icon icon-twitter unstyled-link" target="blank"><i class="fab fa-twitter"></i></a>
            </td>
            <td>
                <a class="social-icon icon-reddit unstyled-link" target="blank"><i class="fab fa-reddit"></i></a>
            </td>
            <td>
                <a class="social-icon icon-whatsapp unstyled-link" target="blank"><i class="fab fa-whatsapp"></i></a>
            </td>
            <td>
                <a class="social-icon icon-telegram unstyled-link" target="blank"><i class="fab fa-telegram"></i></a>
            </td>
            <td>
                <a class="social-icon icon-linkedin unstyled-link" target="blank"><i class="fab fa-linkedin"></i></a>
            </td>
        </tr>
    </table>
</div>

<script>
    const url = window.location.origin;
    const link = encodeURIComponent(url) + "/show-watchlist/{{ user_id }}";
    const msg = encodeURIComponent('Check out my watchlist!');
    const title = encodeURIComponent('Article or Post Title Here');

    const fb = document.querySelector('.icon-facebook');
    fb.href = `https://www.facebook.com/share.php?u=${link}`;

    const twitter = document.querySelector('.icon-twitter');
    twitter.href = `http://twitter.com/share?&url=${link}&text=${msg}&hashtags=universal,streaming,search`;

    const reddit = document.querySelector('.icon-reddit');
    reddit.href = `http://www.reddit.com/submit?url=${link}&title=${title}`;

    const whatsapp = document.querySelector('.icon-whatsapp');
    whatsapp.href = `https://api.whatsapp.com/send?text=${msg}: ${link}`;

    const telegram = document.querySelector('.icon-telegram');
    telegram.href = `https://telegram.me/share/url?url=${link}&text=${msg}`;

    const linkedin = document.querySelector('.icon-linkedin');
    linkedin.href = `https://www.linkedin.com/sharing/share-offsite/?url=${link}`;
</script>

{% endblock %}
